/** *  */Page.onPageLoad.add(function(){	$("#facebook-signup .toggle-signup").click(function(){		$("#facebook-signup").attr('style','display:none;');		$("#signup-form").attr('style','display: inline;');	});		$("#signup-form .toggle-signup").click(function(){		$("#facebook-signup").attr('style','display: inline;');		$("#signup-form").attr('style','display:none;');	});	$('#signup-Name').click(function(){		$('#'+this.id).removeAttr("style");		val = $('#'+this.id).val();		if(val != '')		{			showSpan(this.id);		}	});	$('#signup-Password').click(function(){		$('#'+this.id).removeAttr("style");		val = $('#'+this.id).val();		if(!passAuth(val))		{			showSpan(this.id);		}	});	$('#signup-Email').click(function(){		$('#'+this.id).removeAttr("style");		val = $('#'+this.id).val();		var reMail = /^.+@.+$/;		if(reMail.test(val)){			showSpan(this.id);		}	});					$('#signup-Name').blur(function(){		val = $('#'+this.id).val();		if(val != '')		{			showOk(this.id);		}		else		{			$('#'+this.id+' ~ .hint').empty();			showSpan(this.id);			$('#'+this.id+' ~ .hint').append('请输入您的昵称');		}	});		$('#signup-Password').blur(function(){		val = $('#'+this.id).val();		if(passAuth(val))		{			showOk(this.id);		}		else		{			$('#'+this.id+' ~ .hint').empty();			showSpan(this.id);			$('#'+this.id+' ~ .hint').append('密码不能少于6个字符');		}	});		$('#signup-Email').blur(function(){		val = $(this).val();				$.ajax({			type:'post',			url:js_context.base_url+'ajax/account/checkuser',			data:			{				'email':val			}, 			dataType: "json", 			success: function(data){				if(data.success != true)				{					$('#signup-Email').attr('style','border: 1px solid red;');					$('#signup-Email ~ .hint').empty();					$('#signup-Email ~ .hint').attr('style','padding-left: 20px; background: url("/res/images/icons-validation-sprite.png") no-repeat scroll 0 -14px transparent; color: red; display: inline;');					$('#signup-Email ~ .hint').append('email不能重复');					return false;				}			}		  });							});		$('#signup-Email').blur(function(){		val = $('#'+this.id).val();		var reMail = /^.+@.+$/;		if(reMail.test(val))		{			showOk(this.id);		}		else		{			$('#'+this.id+' ~ .hint').empty();			showSpan(this.id);			$('#'+this.id+' ~ .hint').append('请输入您的电子邮件地址');		}	});			$('#signup-button').click(function(e){				e.preventDefault();		var name = $('#signup-Name').val();		var email = $('#signup-Email').val();		var password = $('#signup-Password').val();		var reMail = /^.+@.+$/;		if(reMail.test(email))		{			$.ajax({				type:'post',				url:'/ajax/account/checkuser',				data:				{					'email':email				}, 				dataType: "json", 				success: function(data){					if(data.success != true)					{						$('#signup-Email').attr('style','border: 1px solid red;');						$('#signup-Email ~ .hint').empty();						$('#signup-Email ~ .hint').attr('style','padding-left: 20px; background: url("/res/images/icons-validation-sprite.png") no-repeat scroll 0 -14px transparent; color: red; display: inline;');						$('#signup-Email ~ .hint').append('email不能重复');						return false;					}				}			  });										$('#signup-Email').removeAttr("style");				showOk('signup-Email');				var e = true;					}		else		{			$('#signup-Email').attr('style','border: 1px solid red;');			$('#signup-Email ~ .hint').empty();			$('#signup-Email ~ .hint').attr('style','padding-left: 20px; background: url("/res/images/icons-validation-sprite.png") no-repeat scroll 0 -14px transparent; color: red; display: inline;');			$('#signup-Email ~ .hint').append('emial格式错误');			return false;		}		if(passAuth(password))		{			$('#signup-Password').removeAttr("style");			showOk('signup-Password');			var p = true;		}		else		{			$('#signup-Password').attr('style','border: 1px solid red;');			$('#signup-Password ~ .hint').empty();			$('#signup-Password ~ .hint').attr('style','padding-left: 20px; background: url("/res/images/icons-validation-sprite.png") no-repeat scroll 0 -14px transparent; color: red; display: inline;');			$('#signup-Password ~ .hint').append('密码长度不符合要求');			return false;		}		if(name != '')		{			$('#signup-Name').removeAttr("style");			showOk('signup-Name');			var n = true;		}else		{			$('#signup-Name').attr('style','border: 1px solid red;');			$('#signup-Name ~ .hint').empty();			$('#signup-Name ~ .hint').attr('style','padding-left: 20px; background: url("/res/images/icons-validation-sprite.png") no-repeat scroll 0 -14px transparent; color: red; display: inline;');			$('#signup-Name ~ .hint').append('昵称不能为空');			return false;		}				//$('#signup-form').submit();		if(e&p&n)		{			//写AJAX插入到数据库			$.ajax({				type:'post',				url:js_context.base_url+'ajax/account/signup',				data:				{					'nickname':name,					'email':email,					'password':password				}, 				dataType: "json", 				success: function(data){					if(data.success == true)					{						 document.location = js_context.gotourl;					}					else					{						console.log(data.result);					}				}			  });														}			});														function showOk(id){		$('#'+id+' ~ .hint').empty();		$('#'+id+' ~ .hint').attr('style','padding-left: 20px; background: url("/res/images/icons-validation-sprite.png") no-repeat scroll 0 0 transparent; color: #339900; display: inline;');	$('#'+id+' ~ .hint').append('ok');	 }function showSpan(id){	$('#'+id+' ~ .hint').attr('style','display: inline;');}function passAuth(par){	reg = /^.{6,}/;	if(reg.test(par))	{		return true;	}	else	{		return false;	}}		})